## **点点 star**

```
流程:
'''
01.输入要解决的问题(task), 语言模型(阿里千问), 外部调用工具 API
02.构造工具的描述模板(Template)
03.候选工具语义检索: 
   function : 每个工具的描述文本向量表示，待解决问题的向量表示
   return : 语义相似度值排序

04.任务拆解模块(Plan) --> (复现商汤TPTU方法):
    第一步：复杂问题拆解,例如:
            Question:绘制一幅包含《咏鹅》诗意信息的图片。
            Plan: 搜索《咏鹅》古诗的内容信息
            #E[1] = search(query="咏鹅古诗")
            Plan: 绘制一幅包含诗意的图片
            #E[2] = image_gen(prompt="A picture of a swan singing in a lake with the words '咏鹅' written on it.")
        注意：输出必须要有三要素
            要素1: Plan:<子任务>
            要素2: 工具函数名<eg:search>, 必须在工具候选集合里
            要素3: 能运行的函数参数<eg:query="咏鹅古诗">

    第二步：子任务检查
        若子任务i 对解决源问题(task)没有帮助，则更新子任务分解方案(代办)  

5. 工具使用模块：
   模型的输出进行参数解析, 执行外部调用API

6. 错误检查:采用 react 重新规划任务 
   _error_403: 工具函数名正确, 函数参数不正确
       解决方案:假设i个子任务sub_task(i)出现错误,获取 i 执行的思维链上信息 
               history=[(Thought1,action1),(Thought2,action2),...]
               对之前的思维链进行归纳总结,即将所有信息融合到最后一轮对话里。
               仅仅使用相同的工具再让模型回答
               {实验测试：输入文本越长，模型回答效果越差}

   _error_404: 工具函数名不正确, 函数参数不正确
       解决方案: 指定react的思维链, 依据给定思维链进行推理。

7. 总结模块：
   收集子问题所有的回答信息和工具调用结果，
   让模型再次回答源问题。           
   '''
```

