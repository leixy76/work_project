

#                                   Metagpt 智能写作

+ 贡献：

   项目的代码贡献到开源项目“METAGPT”中。这得到了“DeepWisdom”创始人吴承琳的认可，后续将努力为开源社区做出贡献。

+ 技术沉淀：

  参考本人博客： [智能写作](https://blog.csdn.net/weixin_43214046/article/details/140763218)    [metagpt 源码解读](https://blog.csdn.net/weixin_43214046/article/details/140042393)   [llama-index 检索](https://blog.csdn.net/weixin_43214046/article/details/140718306)

+ 想法：

   将开源的大型语言模型与“Metagpt”框架相结合，实现智能写作功能。为验证技术路线的可行性，我们选取“论文撰写”作为实验对象，随后将扩展其他领域。

+ 特点：

  在不改变原有结构的基础上，我重新利用了源代码，并仿照`datainterpreter`类进行改良，使得我的代码与原代码更紧密地结合在一起。

+ 技术路线：

  ```mermaid
  flowchart TD
      subgraph 长文档写作
         a(文档摘要) -.-> A
         A[写作大纲] -.yes.->  B[Planner]
          Review-.-> A
         a -.人工设计大纲.-> B[Planner]
      end   
      
      subgraph 写作逻辑
         B -.- 父标题
         父标题 -.-> 子标题1
         父标题 -.-> 子标题2
         子标题1 -.-> 章节指南
         子标题2 -.-> 章节指南
         检索资源文件 -.->  章节指南
         章节指南 -.->  润色修订
         待补充文本-.->  润色修订
         润色指令 -.->  润色修订
         联网 -.->  段落1
         联网 -.->  段落2
         润色修订 -.->  段落1
         润色修订 -.->  段落2
         段落1 -.->  入检索库
         段落2 -.->  入检索库
      end
  
  ```

  + step1 : 首先做任务调度，将复杂的任务拆成若干个小计划。可以人工设定工作流，也可以让模型产生。

  + step2 :  针对每个子任务，执行下述操作。首先大模型根据用户提供的参考信息，先初步定下初稿，生成的初稿让大模型去评价，评价维度如下。后根据评价反馈改进当前初稿。

    ~~~python
    """
    评估维度如下：
        1.语言质量：评估生成的文本是否通顺、语法正确、表达清晰，以及是否符合预期的主题和风格。
        2.内容准确性：评估生成的文本是否包含准确、全面的信息，以及是否能够准确地回答问题或完成任务。
        3.逻辑性：评估生成的文本是否具有合理的逻辑关系等。
        4.上下文相关性：评估生成的文本是否与给定的上下文信息相关，以及是否能够根据上下文信息进行恰当的推理和推断。
        5.安全性：评估生成的文本是否包含敏感信息或不适宜的内容，以及是否能够避免产生歧视性、攻击性或恶意的言论。
    
     Output a list of jsons following the format:
         ```json
        [
            {{
                "Evaluation_point": str = "依据五个评价标准，按顺序对 report 中的文本内容进行详细评估",
                "score":int =  "评分，范围在 0-5 之间，用于量化文本质量",
                "reason": str = "评分的依据和解释",
                "critique": str = "提供针对生成文本的具体改进建议"
            }},
            ...
        ]
        ```
    """
    ~~~

    ```mermaid
    flowchart TD
           初稿 .-> 评估
           评估 -.通过.->  next_task
           评估 -.不通过.-> 改进
           改进 -.-> 初稿
    ```

+ 缺点：

   AI 无法准确自动添加索引目录，AI 写作也无法插入图片和表格。 

+ 目录说明： 

   data：保存用户上传文件、保存文件解析向量存储、文件输出目录。

    ai_writer： 代码执行文件，放置在 metagpt/ext 目录下，启动脚本 document.py

​              

​             

































.
